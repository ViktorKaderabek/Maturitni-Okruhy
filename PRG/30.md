
<p align="right" style="font-size: 80px;">#30</p>

# Základy jazyka XML, práce s XML soubory

## XML

* Rozšířený značkovací jazyk (e**X**tensible **M**arkup **L**anguage)
* Vytvořen k ukládání a přenosu dat
* Není nijak na tvrdo daná struktura psaní XML
* Není to programovací ani skriptovací jazyk - nic nedělá - pouze uložená data
* XML nepoužívá předdefinované tagy (jako v html např. <body>, <head>, etc...)
* Deklarace XML obsahuje verzi a formátování textu
* V XML píšeme tkzv. stromováním, viz obrázek níže:
 
* Rozdělujeme zde základně na dvě věci

  * Element - daný tag
  * Atribut - hodnota daného elementu 
 
* XML deklarace
  * XML - declaration is not a tag. It is used for the transmission of the meta-data of a document.
```php
<?xml version="1.0" encoding="UTF-8"?>
```
* "Correct" XML (valid and well-formed)
  * Correct design rules
 
    * For an XML document to be correct, the following conditions must be fulfilled:

    * Document must be well-formed.
    * Document must conform to all XML syntax rules.
    * Document must conform to semantic rules, which are usually set in an XML schema or a DTD (Document Type Definition).
 ```php
 //spatna verze
 <?xml version="1.0" encoding="UTF-8"?>
<message>
    <warning>
        Hello World
    <!--missing </warning> -->
</message>
```
 ```php
  //spravna verze
 <?xml version="1.0" encoding="UTF-8"?>
<message>
    <warning>
         Hello World
    </warning>
</message>
```
## Práce s XML v C#

### Vytváření XML

V C# .Net pracujeme v XML jednoduše. Vytváříme elementy a v nich atributy.

```php
XmlDocument doc = new XmlDocument( );

//(1) the xml declaration is recommended, but not mandatory
XmlDeclaration xmlDeclaration = doc.CreateXmlDeclaration( "1.0", "UTF-8", null );
XmlElement root = doc.DocumentElement;
doc.InsertBefore( xmlDeclaration, root );

//(2) string.Empty makes cleaner code
XmlElement element1 = doc.CreateElement( string.Empty, "body", string.Empty );
doc.AppendChild( element1 );

XmlElement element2 = doc.CreateElement( string.Empty, "level1", string.Empty );
element1.AppendChild( element2 );

XmlElement element3 = doc.CreateElement( string.Empty, "level2", string.Empty );
XmlText text1 = doc.CreateTextNode( "text" );
element3.AppendChild( text1 );
element2.AppendChild( element3 );

XmlElement element4 = doc.CreateElement( string.Empty, "level2", string.Empty );
XmlText text2 = doc.CreateTextNode( "other text" );
element4.AppendChild( text2 );
element2.AppendChild( element4 );

doc.Save( "D:\\document.xml" );
```

**Dokážeme také pomocí těchto XML metod vytvořit HTML soubor** (taktéž TAGovací jazyk)

### Čtení XML

Ze souboru XML se čte jednodušeji než se do něj zapisuje, jelikož základní metody XML mají mapování celého dokumentu. Tudíž do něj můžu vstupovat jednoduše pomocí pole

```csharp
XmlTextReader textReader = new XmlTextReader("C:\\books.xml");  
textReader.Read();  
// If the node has value  
while (textReader.Read()) {  
    // Move to fist element  
    textReader.MoveToElement();  
    Console.WriteLine("XmlTextReader Properties Test");  
    Console.WriteLine("===================");  
    // Read this element's properties and display them on console  
    Console.WriteLine("Name:" + textReader.Name);  
    Console.WriteLine("Base URI:" + textReader.BaseURI);  
    Console.WriteLine("Local Name:" + textReader.LocalName);  
    Console.WriteLine("Attribute Count:" + textReader.AttributeCount.ToString());  
    Console.WriteLine("Depth:" + textReader.Depth.ToString());  
    Console.WriteLine("Line Number:" + textReader.LineNumber.ToString());  
    Console.WriteLine("Node Type:" + textReader.NodeType.ToString());  
    Console.WriteLine("Attribute Count:" + textReader.Value.ToString());  
} 
```

## Závěr

XML používám dost často jak na komunikaci s server pomocí AJAX komunikace (pouze v C#), případně k ukládání dočasných i nedočasných dat. Musím tedy, ale říct, že programuji-li v Javě používám převážně JSON, pro jeho lehkost implementování v kódu.
